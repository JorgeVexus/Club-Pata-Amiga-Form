<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bit√°cora de Cambios - Club Pata Amiga</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #9FD406;
            --primary-hover: #8bc205;
            --dark: #1A1A1A;
            --dark-light: #2A2A2A;
            --gray: #F5F5F7;
            --text: #333333;
            --text-light: #666666;
            --border: #E5E5E5;
            --white: #FFFFFF;
            --success-bg: #E8F5E9;
            --success-text: #2E7D32;
            --warning-bg: #FFF3E0;
            --warning-text: #EF6C00;
            --danger-bg: #FFEBEE;
            --danger-text: #C62828;
            --purple-bg: #F3E5F5;
            --purple-text: #7B1FA2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--gray);
            color: var(--text);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background-color: var(--dark);
            color: var(--white);
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--dark-light);
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 30px;
            border-bottom: 1px solid var(--dark-light);
        }

        .brand-logo {
            font-size: 20px;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--white);
            margin-bottom: 5px;
        }

        .brand-logo span {
            color: var(--primary);
        }

        .brand-subtitle {
            font-size: 12px;
            color: #888;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .nav-dates {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .nav-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #666;
            font-weight: 700;
            margin-bottom: 12px;
            padding-left: 10px;
            letter-spacing: 1px;
        }

        .nav-item {
            width: 100%;
            text-align: left;
            padding: 14px 18px;
            background: transparent;
            border: none;
            color: #bbb;
            cursor: pointer;
            border-radius: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: inherit;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .nav-item:hover {
            background-color: var(--dark-light);
            color: var(--white);
        }

        .nav-item.active {
            background-color: var(--primary);
            color: var(--dark);
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(159, 212, 6, 0.2);
        }

        .nav-item .badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
        }

        .nav-item.active .badge {
            background: rgba(0, 0, 0, 0.1);
            color: var(--dark);
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            scroll-behavior: smooth;
        }

        .changelog-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .changelog-entry {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .changelog-entry.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .entry-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .entry-title h1 {
            font-size: 32px;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .entry-meta {
            color: var(--text-light);
            font-size: 14px;
            font-weight: 500;
        }

        .version-tag {
            background: var(--dark);
            color: var(--white);
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 12px;
            letter-spacing: 0.5px;
        }

        .section-card {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0, 0, 0, 0.03);
            transition: transform 0.2s;
        }

        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.06);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .change-list {
            list-style: none;
        }

        .change-item {
            display: flex;
            gap: 15px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f0f0f0;
        }

        .change-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .tag {
            height: 24px;
            padding: 0 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
            white-space: nowrap;
            min-width: 80px;
        }

        .tag.feature {
            background-color: var(--success-bg);
            color: var(--success-text);
        }

        .tag.improvement {
            background-color: var(--warning-bg);
            color: var(--warning-text);
        }

        .tag.fix {
            background-color: var(--danger-bg);
            color: var(--danger-text);
        }

        .change-desc {
            font-size: 15px;
            line-height: 1.6;
            color: var(--text);
        }

        .change-desc strong {
            color: var(--dark);
            font-weight: 600;
        }

        .empty-state {
            text-align: center;
            padding: 60px;
            color: var(--text-light);
            font-size: 16px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
                height: auto;
                overflow: auto;
            }

            .sidebar {
                width: 100%;
                max-height: auto;
            }

            .main-content {
                padding: 20px;
            }

            .entry-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }
    </style>
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="brand-logo">üêæ Club <span>Pata Amiga</span></div>
            <div class="brand-subtitle">Dev Changelog</div>
        </div>
        <nav class="nav-dates" id="nav-list">
            <div class="nav-label">Historial de Cambios</div>
            <!-- Los items del men√∫ se generar√°n aqu√≠ -->
            <button class="nav-item active" onclick="switchTab('2026-02-09')">
                <span>9 de Feb, 2026</span>
                <span class="badge">Hoy</span>
            </button>
            <button class="nav-item" onclick="switchTab('2026-02-07')">
                <span>7 de Feb, 2026</span>
                <span class="badge">Infra</span>
            </button>
            <button class="nav-item" onclick="switchTab('2026-02-05')">
                <span>5 de Feb, 2026</span>
                <span class="badge">Widgets</span>
            </button>
            <button class="nav-item" onclick="switchTab('2026-02-04')">
                <span>4 de Feb, 2026</span>
                <span class="badge">CRM</span>
            </button>
        </nav>
        <div
            style="padding: 20px; border-top: 1px solid var(--dark-light); font-size: 11px; color: #666; text-align: center;">
            &copy; 2026 Pata Amiga - Vexus Dev Team
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="changelog-container">

            <!-- Entrada: 9 de Febrero (HOY) -->
            <div id="2026-02-09" class="changelog-entry active">
                <div class="entry-header">
                    <div class="entry-title">
                        <h1>Mantenimiento & Dashboard UI</h1>
                        <div class="entry-meta">Lunes, 9 de Febrero de 2026</div>
                    </div>
                    <div class="version-tag">v2.3.0</div>
                </div>

                <div class="section-card">
                    <div class="section-title">üë• Gesti√≥n de Usuarios (Dashboard)</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Etiquetas de Rol:</strong> Identificaci√≥n visual de "MIEMBRO" y "EMBAJADOR" en
                                la tabla general.
                                <em>L√≥gica condicional: La etiqueta de Miembro solo aparece si el usuario tiene mascotas
                                    registradas.</em>
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Lista Unificada:</strong> Se fusionaron las vistas de Miembros y Embajadores en
                                "Gesti√≥n General" para facilitar la administraci√≥n centralizada.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Deduplicaci√≥n de Usuarios:</strong> Se ocultan autom√°ticamente los registros
                                "shell" de autenticaci√≥n de Embajadores para mostrar solo el perfil completo.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Contadores Sidebar:</strong> Correcci√≥n en la l√≥gica de conteo para solicitudes
                                pendientes.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section-card">
                    <div class="section-title">üîê Autenticaci√≥n & UX</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag improvement">UX</span>
                            <div class="change-desc">
                                <strong>Redirecci√≥n Login:</strong> Ajuste de rutas pos-login:
                                <ul style="margin-top:5px; margin-left:20px; font-size:0.9em;">
                                    <li>Miembros ‚Üí <code>/pets/pet-waiting-period</code></li>
                                    <li>Embajadores ‚Üí <code>/embajadores/dashboard</code></li>
                                </ul>
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Switch de Cuenta:</strong> Bot√≥n "Cerrar sesi√≥n" en
                                <code>/embajadores/registro</code> para facilitar el cambio de cuenta.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Registro Admin:</strong> Soluci√≥n al error "Email already taken" mediante
                                limpieza de registros hu√©rfanos.
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Entrada: 7 de Febrero -->
            <div id="2026-02-07" class="changelog-entry">
                <div class="entry-header">
                    <div class="entry-title">
                        <h1>Migraci√≥n de Dominios y Autenticaci√≥n</h1>
                        <div class="entry-meta">S√°bado, 7 de Febrero de 2026</div>
                    </div>
                    <div class="version-tag">v2.2.0</div>
                </div>

                <div class="section-card">
                    <div class="section-title">üåê Infraestructura de Dominios</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Subdominio App:</strong> Migraci√≥n completa de la aplicaci√≥n a
                                <code>app.pataamiga.mx</code>, separando el tr√°fico de marketing (Webflow) del
                                aplicativo (Vercel).
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Configuraci√≥n DNS:</strong> Eliminaci√≥n de Workers intermedios. Configuraci√≥n
                                directa CNAME en Cloudflare para optimizar latencia y simplificar SSL.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Verificaci√≥n Resend:</strong> Validaci√≥n y configuraci√≥n de registros DKIM/SPF
                                para asegurar la entregabilidad de correos transaccionales desde el nuevo dominio.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section-card">
                    <div class="section-title">üîê L√≥gica de Autenticaci√≥n</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Detecci√≥n de Sesi√≥n Cross-Domain:</strong> Se implement√≥ l√≥gica de "gracia" en
                                <code>AuthRedirector</code>.
                                <em>Nota: La persistencia total de sesi√≥n entre www y app requiere plan de pago en
                                    Memberstack para cookies cross-site.</em>
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Redirecci√≥n Login:</strong> El flujo de login se centraliza en el aplicativo.
                                Los usuarios son redirigidos inmediatamente al dashboard correspondiente seg√∫n su rol
                                (Admin/Embajador/Miembro).
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="section-card">
                    <div class="section-title">üé® Frontend & Webflow</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Slider de Beneficios:</strong> Implementaci√≥n del widget "Stacked Cards"
                                (Lo que ofrece la membres√≠a). L√≥gica 100% custom para garantizar 5 tarjetas visibles
                                con efecto de profundidad y posicionamiento absoluto, replicando Figma
                                sin dependencias pesadas.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">WIP</span>
                            <div class="change-desc">
                                <strong>Landing Page:</strong> Inicio de la maquetaci√≥n completa del dise√±o de Figma
                                para la nueva Home en Webflow, integrando los nuevos widgets y gu√≠a de estilos.
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="section-card">
                    <div class="section-title">‚öôÔ∏è Backend & Config</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag improvement">ADMIN</span>
                            <div class="change-desc">
                                <strong>Propiedad Memberstack:</strong> Transferencia exitosa de la propiedad de la
                                cuenta
                                Memberstack. Se verific√≥ que API Keys, dominios y redirecciones se mantuvieran intactos.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">CLEANUP</span>
                            <div class="change-desc">
                                <strong>Limpieza Base de Datos:</strong> Reset completo de usuarios de prueba en
                                Supabase
                                y Memberstack para iniciar fase de producci√≥n con datos limpios.
                                <em>(Tablas truncadas: users, memberships, pets, notifications, etc.)</em>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Entrada: 5 de Febrero -->
            <div id="2026-02-05" class="changelog-entry">
                <div class="entry-header">
                    <div class="entry-title">
                        <h1>Actualizaci√≥n Formulario y Widgets</h1>
                        <div class="entry-meta">Jueves, 5 de Febrero de 2026</div>
                    </div>
                    <div class="version-tag">v2.1.0</div>
                </div>

                <div class="section-card">
                    <div class="section-title">üß© Pet Cards Widget (Webflow)</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Formulario completo implementado:</strong> Se a√±adi√≥ un modal completo para
                                agregar mascotas que replica exactamente la funcionalidad de /registrar-mascotas,
                                incluyendo l√≥gica condicional y validaciones.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Edad m√≠nima ajustada:</strong> Se estableci√≥ que la edad m√≠nima de registro sea
                                de 4 meses (4-6 meses) en lugar de 0 meses, tanto en la plataforma principal como en el
                                widget.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Tama√±os din√°micos:</strong> Las opciones de tama√±o ahora cambian seg√∫n si es
                                perro (Chica/Mediana/Grande/Gigante) o gato (Chica/Mediana/Grande).
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Validaci√≥n Senior:</strong> Nueva l√≥gica que detecta autom√°ticamente si una
                                mascota es senior seg√∫n su talla y solicita certificado veterinario obligatorio.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>C√≥digo Embajador:</strong> Nuevo campo con validaci√≥n en tiempo real contra la
                                API para referidos.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Subida de fotos real:</strong> Integraci√≥n con Supabase Storage para alojar las
                                im√°genes de las mascotas.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Error de 3ra mascota:</strong> Solucionado el bug que imped√≠a registrar la
                                tercera mascota en el widget (validaci√≥n de l√≠mite corregida).
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section-card">
                    <div class="section-title">üîî Realtime Notifications Widget</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Redirecci√≥n Inteligente:</strong> Los enlaces de notificaciones ahora redirigen
                                autom√°ticamente a las rutas correctas (ej: /pets/pet-waiting-period) para evitar errores
                                404,
                                configurable desde Webflow.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Modal de Detalles:</strong> Las notificaciones sin enlace o informativas ahora
                                abren un modal nativo limpio con el mensaje completo en lugar de intentar navegar.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section-card">
                    <div class="section-title">üìù Formulario de Registro</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Ajuste de edad m√≠nima:</strong> Se elimin√≥ la opci√≥n "0-6 meses" y se reemplaz√≥
                                por "4-6 meses" para cumplir con requisitos del seguro.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Detecci√≥n de sesi√≥n inteligente:</strong> El formulario ahora detecta si ya
                                existe una sesi√≥n y ofrece ir al dashboard o cerrar sesi√≥n.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Eliminaci√≥n de comprobante:</strong> Ya no se solicita comprobante de domicilio
                                durante el registro inicial.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag improvement">UPDATE</span>
                            <div class="change-desc">
                                <strong>Autocomplete predictivo:</strong> La b√∫squeda de razas ahora sugiere resultados
                                desde la primera letra escrita.
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="section-card">
                    <div class="section-title">üìö Documentaci√≥n</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>RESUMEN_CRM_AGENCIA.md:</strong> Documentaci√≥n t√©cnica detallada sobre la
                                integraci√≥n con Lynsales para la agencia de marketing.
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Entrada: 4 de Febrero (AYER) -->
            <div id="2026-02-04" class="changelog-entry">
                <div class="entry-header">
                    <div class="entry-title">
                        <h1>Integraci√≥n CRM Lynsales</h1>
                        <div class="entry-meta">Mi√©rcoles, 4 de Febrero de 2026</div>
                    </div>
                    <div class="version-tag">v2.0.0</div>
                </div>

                <div class="section-card">
                    <div class="section-title">üîó Backend & Integraciones</div>
                    <ul class="change-list">
                        <li class="change-item">
                            <span class="tag feature">NEW</span>
                            <div class="change-desc">
                                <strong>Sincronizaci√≥n bidireccional:</strong> Los contactos ahora se crean como
                                "Prospecto" al registrarse y se actualizan a "Miembro Activo" al aprobarse.
                            </div>
                        </li>
                        <li class="change-item">
                            <span class="tag fix">FIX</span>
                            <div class="change-desc">
                                <strong>Fallback de b√∫squeda:</strong> Correcci√≥n en la b√∫squeda de usuarios por email
                                cuando el ID de Memberstack no est√° sincronizado.
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </main>

    <script>
        function switchTab(dateId) {
            // 1. Quitar clase active de todos los botones
            document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));

            // 2. Ocultar todas las entradas
            document.querySelectorAll('.changelog-entry').forEach(entry => {
                entry.classList.remove('active');
            });

            // 3. Activar el bot√≥n clickeado (buscamos por onclick para simplicidad)
            const activeBtn = Array.from(document.querySelectorAll('.nav-item')).find(btn => btn.getAttribute('onclick').includes(dateId));
            if (activeBtn) activeBtn.classList.add('active');

            // 4. Mostrar la entrada correspondiente
            const entryToShow = document.getElementById(dateId);
            if (entryToShow) {
                entryToShow.classList.add('active');
                // Scroll al top
                document.querySelector('.main-content').scrollTop = 0;
            }
        }
    </script>
</body>

</html>